\usepackage{etoolbox}

\newbool{shouldNewPage}\setbool{shouldNewPage}{true}

\newcommand{\newprob}[3][]{
    \begin{prob}{#1}
        #2
        \tcblower
        #3
    \end{prob}

    \ifbool{shouldNewPage}{
        \newpage
    }
}

\newcounter{Theorems}
\newenvironment{theorem}[2][]{
    \stepcounter{Theorems}
    \begin{theorembox}[#1]{#2}{\theTheorems}
        }{
    \end{theorembox}
}

\newenvironment{proof}[2][]{
    \begin{proofbox*}[#1]{#2}{}
        }{
    \end{proofbox*}
}

\newcounter{Definitions}
\newenvironment{definition}[2][]{
    \stepcounter{Definitions}
    \begin{definitionbox}[#1]{#2}{\theDefinitions}
        }{
    \end{definitionbox}
}

\newcounter{Remarks}
\newenvironment{remark}[2][]{
    \stepcounter{Remarks}
    \begin{remarkbox}[#1]{#2}{\theRemarks}
        }{
    \end{remarkbox}
}

\newenvironment{claim}[2][]{
    \begin{claimbox*}[#1]{#2}{}
        }{
    \end{claimbox*}
}

\newcounter{Propositions}
\newenvironment{prop}[2][]{
    \stepcounter{Propositions}
    \begin{propbox}[#1]{#2}{\thePropositions}
        }{
    \end{propbox}
}

\newcounter{Lemmas}
\newenvironment{lemma}[2][]{
    \begin{lemmabox}[#1]{#2}{\theLemmas}
        }{
    \end{lemmabox}
}

\newcounter{Corollaries}
\newenvironment{corollary}[2][]{
    \begin{corollarybox}[#1]{#2}{\theCorollaries}
        }{
    \end{corollarybox}
}

\newcounter{Example}
\newenvironment{example}[2][]{
    \stepcounter{Example}
    \begin{examplebox}[#1]{#2}{\theExample}
        }{
    \end{examplebox}
}
